[
  {
    "conditions": {
      "target.mappable.terrain": { "is": "sown" },
      "or": [
        { "season": { "is": "summer" } },
        { "season": { "is": "spring" }, "time_of_day": { "is": "night" } }
      ]
    },
    "event": {
      "rules": {
        "target": [
          { "event": { "mappable": { "set": { "terrain": "growing" } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "target.mappable.terrain": { "is": "growing" },
      "or": [
        { "season": { "is": "autumn" } },
        { "season": { "is": "summer" }, "time_of_day": { "is": "night" } }
      ]
    },
    "event": {
      "rules": {
        "target": [
          { "event": { "mappable": { "set": { "terrain": "harvestable" } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "target.mappable.terrain": {
        "or": [
          { "is": "growing" },
          { "is": "harvestable" },
          { "is": "sown" },
          { "is": "ploughed" }
        ]
      },
      "or": [
        { "season": { "is": "winter" } },
        { "season": { "is": "autumn" }, "time_of_day": { "is": "night" } }
      ]
    },
    "event": {
      "rules": {
        "target": [
          { "event": { "mappable": { "set": { "terrain": "dirt" } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "target.personable": "exists",
      "time_of_day": { "is": "evening" },
      "target.traits.values": { "not": { "has": "eaten" } },
      "controller.supplies.grain": { "greaterEq": 1 }
    },
    "event": {
      "rules": {
        "target": [
          { "event": { "traits.values": { "add": { "eaten": 4 } } } },
          { "event": { "traits.values": { "remove": "hungry" } } },
          { "event": { "traits.values": { "remove": "starving" } } }
        ],
        "controller": [
          { "event": { "supplies": { "lose": { "grain": 1 } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "time_of_day": { "is": "night" },
      "target.personable": "exists",
      "target.traits.values": {
        "not": {
          "or": [
            { "has": "eaten" },
            { "has": "hungry" },
            { "has": "starving" }
          ]
        }
      }
    },
    "event": {
      "summary": "turn.hunger",
      "level": "warning",
      "rules": {
        "target": [
          { "event": { "traits.values": { "add": { "hungry": true } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "time_of_day": { "is": "night" },
      "target.personable": "exists",
      "target.traits.values": {
        "has": "hungry",
        "not": { "has": "eaten" }
      }
    },
    "event": {
      "summary": "turn.starve",
      "level": "warning",
      "rules": {
        "target": [
          { "event": { "traits.values": { "remove": "hungry", "add": { "starving": true } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "time_of_day": { "is": "night" },
      "target.personable": "exists",
      "target.traits.values": {
        "has": "starving",
        "not": { "has": "eaten" }
      }
    },
    "event": {
      "summary": "turn.die",
      "level": "warning",
      "rules": {
        "target": [
          { "event": { "personable": { "die": { "hunger": true } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "time_of_day": { "is": "night" },
      "season": { "not": { "is": "summer" } },
      "target.personable": "exists",
      "target.assignable.task": { "not": "exists" }
    },
    "event": {
      "summary": "turn.colder",
      "level": "warning",
      "rules": {
        "target": [
          {
            "conditions": {
              "traits.values": {
                "not": {
                  "or": [
                    { "has": "cold" },
                    { "has": "freezing" }
                  ]
                }
              }
            },
            "event": { "traits.values": { "add": { "cold": 4 } } }
          },
          {
            "conditions": {
              "traits.values": { "has": "cold" }
            },
            "event": { "traits.values": { "remove": "cold", "add": { "freezing": 8 } } }
          }
        ]
      }
    }
  },
  {
    "hidden": true,
    "conditions": {
      "target.attributes.moves": "exists"
    },
    "event": {
      "rules": {
        "target": [
          { "event": { "attributes": { "set": {"moves": 4 } } } }
        ]
      }
    }
  },
  {
    "conditions": {
      "time_of_day": { "is": "night" },
      "season": { "not": { "is": "summer" } },
      "target.personable": "exists",
      "target.traits.values": { "has": "freezing" },
      "target.assignable.task": { "not": "exists" }
    },
    "event": {
      "summary": "turn.die",
      "level": "warning",
      "rules": {
        "target": [
          { "event": { "personable": { "die": { "hypothermia": true } } } }
        ]
      }
    }
  }
]
